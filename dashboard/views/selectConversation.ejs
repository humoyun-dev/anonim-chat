<%- include("partials/layout-top", { title, active }) %>

  <div class="container-fluid" style="max-width: 760px;">
    <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h4 m-0">Select Conversation</h1>
    <a class="btn btn-sm btn-outline-light" href="/chat">Chat</a>
  </div>

  <% if (error) { %>
  <div class="alert alert-danger"><%= error %></div>
  <% } %>

  <div class="card border-0" style="background: rgba(15,23,42,0.55); border: 1px solid rgba(255,255,255,0.08) !important;">
    <div class="card-body">
      <form action="/conversation" method="POST">
        <div class="mb-3">
          <label for="sender" class="form-label">Sender user</label>
          <select id="sender" name="sender" class="form-select" required>
            <option value="">Select...</option>
            <% users.forEach((user) => { %>
            <option value="<%= user.userId %>">
              <%= user.firstName || "" %> <%= user.lastName || "" %>
              <% if (user.username) { %>
              (@<%= user.username %>)
              <% } %>
              [ID: <%= user.userId %>]
            </option>
            <% }) %>
          </select>
        </div>
        <div class="mb-3">
          <label for="receiver" class="form-label"
            >Recipient user</label
          >
          <select id="receiver" name="receiver" class="form-select" required>
            <option value="">Select...</option>
            <% users.forEach((user) => { %>
            <option value="<%= user.userId %>">
              <%= user.firstName || "" %> <%= user.lastName || "" %>
              <% if (user.username) { %>
              (@<%= user.username %>)
              <% } %>
              [ID: <%= user.userId %>]
            </option>
            <% }) %>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">
          Open conversation
        </button>
      </form>
    </div>
  </div>
</div>

<%- include("partials/layout-bottom") %>
